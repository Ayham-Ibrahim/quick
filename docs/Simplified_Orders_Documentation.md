# ๐ฆ ูุธุงู ุงูุทูุจุงุช ุงููุจุณุท - Quick API
## ุฏููู ูุทูุฑ ุชุทุจููุงุช ุงูููุจุงูู

---

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู Quick ูุฏุนู ููุนูู ูู ุงูุทูุจุงุช ุจูุธุงู ุญุงูุงุช ููุญุฏ ููุจุณุท:

| ุงูููุน | ุงููุตู | ุงููุตุฏุฑ |
|-------|-------|--------|
| **ุงูุทูุจ ุงูุนุงุฏู (Order)** | ููุชุฌุงุช ูู ุงููุชุงุฌุฑ ุงููุณุฌูุฉ | Checkout |
| **ุงูุทูุจ ุงูุฎุงุต (CustomOrder)** | ุงุทูุจ ุฃู ุดูุก - ูุตู + ูููุน | ุฅูุดุงุก ูุจุงุดุฑ |

### โจ ุงูุชุญุฏูุซุงุช ุงูุฌุฏูุฏุฉ (v2)
- โ **ุงูุทูุจุงุช ุงูููุญุฏุฉ** - ุฌูุจ Orders + CustomOrders ูุนุงู ูู endpoint ูุงุญุฏ
- โ **ุงูุณุงุฆู ูุง ูุณุชุทูุน ุงูุฅูุบุงุก** - ุจุนุฏ ูุจูู ุงูุทูุจุ ููุท ุงูุฅุฏุงุฑุฉ ุชุณุชุทูุน ุงูุฅูุบุงุก
- โ **ุดุฑูุท ุฃูููุฉ ุงูุณุงุฆู** - ุฑุตูุฏ ุงููุญูุธุฉ + ุนุฏุฏ ุงูุทูุจุงุช ุงููุดุทุฉ
- โ **ุญูู `order_type`** - ูููุฒ ููุน ุงูุทูุจ ูู ุงูุงุณุชุฌุงุจุฉ ุงูููุญุฏุฉ
- ๐ **ุฅุนุงุฏุฉ ุงูุทูุจ (Reorder)** - ุฅุนุงุฏุฉ ุทูุจ ุทูุจูุฉ ููุชููุฉ ุจุงูุฃุณุนุงุฑ ุงูุญุงููุฉ

---

## ๐ ุงูุญุงูุงุช ุงูุฃุฑุจุนุฉ ุงููุจุณุทุฉ

```
    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ                    ุงูุญุงูุงุช ุงูุฃุฑุจุนุฉ                           โ
    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
    โ                                                             โ
    โ   โโโโโโโโโโโโ      โโโโโโโโโโโโ      โโโโโโโโโโโโ         โ
    โ   โ  ูุนูู    โ โโโโบ โููุฏ ุงูุชูุตููโ โโโโบ โุชู ุงูุชุณูููโ         โ
    โ   โ pending  โ      โ shipping โ      โdelivered โ         โ
    โ   โโโโโโฌโโโโโโ      โโโโโโฌโโโโโโ      โโโโโโโโโโโโ         โ
    โ        โ                 โ                                  โ
    โ        โ                 โ                                  โ
    โ        โผ                 โผ                                  โ
    โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                           โ
    โ   โ          ููุบู               โ                           โ
    โ   โ       cancelled             โ                           โ
    โ   โ      (ูุน ุณุจุจ)               โ                           โ
    โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                           โ
    โ                                                             โ
    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

| ุงูุญุงูุฉ | ุงููููุฉ | ุงููุตู ุจุงูุนุฑุจูุฉ |
|--------|--------|----------------|
| **ูุนูู** | `pending` | ุชู ุงูุทูุจ ูุจุงูุชุธุงุฑ ูุจูู ุณุงุฆู |
| **ููุฏ ุงูุชูุตูู** | `shipping` | ุงูุณุงุฆู ูุจู ูููุตูู ุงูุทูุจ |
| **ุชู ุงูุชุณููู** | `delivered` | ุชู ุงูุชุณููู ููุฒุจูู โ |
| **ููุบู** | `cancelled` | ููุบู ุฃู ูุดู ุงูุชุณููู (ูุน ุณุจุจ) |

---

## ๐ ูุณุงุฑ ุงูุทูุจ

### ููุทูุจูู (Order & CustomOrder)

```
    ๐ค ุงููุณุชุฎุฏู                ๐ฅ๏ธ ุงูุฎุงุฏู                ๐ ุงูุณุงุฆู
        โ                          โ                        โ
        โ  ุฅูุดุงุก ุงูุทูุจ             โ                        โ
        โ  POST /orders            โ                        โ
        โ  POST /custom-orders     โ                        โ
        โ โโโโโโโโโโโโโโโโโโโโโโโโโ>                        โ
        โ                          โ                        โ
        โ  status: pending         โ   ๐ข ุฅุดุนุงุฑ ููุณุงุฆููู    โ
        โ  โฑ๏ธ 5 ุฏูุงุฆู ูููุจูู       โ โโโโโโโโโโโโโโโโโโโโโ> โ
        โ<โโโโโโโโโโโโโโโโโโโโโโโโโโ                        โ
        โ                          โ                        โ
        โ                          โ   ูุจูู ุงูุทูุจ           โ
        โ                          โ   POST /{id}/accept    โ
        โ                          โ <โโโโโโโโโโโโโโโโโโโโโ โ
        โ                          โ                        โ
        โ  ๐ฑ ุงูุณุงุฆู ูุจู ุทูุจู      โ   status: shipping     โ
        โ  status: shipping        โ                        โ
        โ<โโโโโโโโโโโโโโโโโโโโโโโโโโ                        โ
        โ                          โ                        โ
        โ                          โ   ุชุณููู                โ
        โ                          โ   POST /{id}/deliver   โ
        โ                          โ <โโโโโโโโโโโโโโโโโโโโโ โ
        โ                          โ                        โ
        โ  ๐ฑ ุชู ุงูุชูุตูู           โ   status: delivered    โ
        โ  status: delivered       โ                        โ
        โ<โโโโโโโโโโโโโโโโโโโโโโโโโโ                        โ
        โ                          โ                        โ
        โ                          โ                        โ
        โ  [ุฅุฐุง ููุบู ูู ุงูุฅุฏุงุฑุฉ]   โ                        โ
        โ  ุฅุนุงุฏุฉ ูุญุงููุฉ            โ                        โ
        โ  POST /{id}/retry        โ                        โ
        โ โโโโโโโโโโโโโโโโโโโโโโโโโ>                        โ
        โ  status: pending         โ                        โ
        โ                          โ                        โ
        โโโโโโโโโโโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## โฑ๏ธ ุขููุฉ ุงูุชุธุงุฑ ุงูุณุงุฆู

```
    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ                     ุชุฏูู ุงูุชุธุงุฑ ุงูุณุงุฆู                              โ
    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

    1๏ธโฃ ุฅูุดุงุก ุงูุทูุจ
         โ
         โผ
    โโโโโโโโโโโโโโโโโโโโ
    โ    pending       โ  โ confirmation_expires_at = +5 ุฏูุงุฆู
    โ is_available=trueโ
    โโโโโโโโโโฌโโโโโโโโโโ
             โ
       โโโโโโโดโโโโโโ
       โ           โ
       โผ           โผ
    โโโโโโโโโ   โโโโโโโโโโโโโโโโโโโโ
    โ ุณุงุฆู  โ   โ  ุงูุชูุช ุงูุตูุงุญูุฉ   โ
    โ ูุจูู  โ   โ is_confirmation  โ
    โโโโโคโโโโ   โ _expired = true  โ
        โ       โโโโโโโโโโโคโโโโโโโโโ
        โ                 โ
        โผ                 โผ
    โโโโโโโโโโ   โโโโโโโโโโโโโโโโโโโโโโโโ
    โshippingโ   โ      pending         โ
    โ        โ   โ can_resend = true    โ
    โโโโโโโโโโ   โ ุฒุฑ "ุชุฃููุฏ ุงูุทูุจ" ูุธูุฑ โ
                 โโโโโโโโโโโโฌโโโโโโโโโโโโ
                            โ
                            โผ ุงููุณุชุฎุฏู ูุถุบุท /resend
                 โโโโโโโโโโโโโโโโโโโโ
                 โ    pending       โ  โ expires_at ุฌุฏูุฏ +5 ุฏูุงุฆู
                 โ is_available=trueโ
                 โโโโโโโโโโโโโโโโโโโโ
```

### ุงูููุฎุต:
- ุนูุฏ ุฅูุดุงุก ุงูุทูุจ: `pending` + `confirmation_expires_at = now + 5 ุฏูุงุฆู`
- ุฅุฐุง ุงูุชูุช ุงูุตูุงุญูุฉ ุจุฏูู ูุจูู ุณุงุฆู: **ุงูุทูุจ ูุจูู pending** ูููู `can_resend_to_drivers = true`
- ุงููุณุชุฎุฏู ูุถุบุท `/resend` ูุชุฌุฏูุฏ ุงูุตูุงุญูุฉ ูุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุฌุฏูุฏุฉ ููุณุงุฆููู
- **ุงูุทูุจ ูุง ูููุบู ุชููุงุฆูุงู** ุนูุฏ ุงูุชูุงุก ุงูุตูุงุญูุฉ

---

## ๐ APIs Reference

### ๐ Unified Orders - ุงูุทูุจุงุช ุงูููุญุฏุฉ (ุฌุฏูุฏ!)

> ุฌูุจ ุงูุทูุจุงุช ุงูุนุงุฏูุฉ ูุงูุฎุงุตุฉ ูุนุงู ูู ุงุณุชุฌุงุจุฉ ูุงุญุฏุฉ

| ุงูุทุฑููุฉ | ุงููุณุงุฑ | ุงููุตู | Guard |
|---------|--------|-------|-------|
| `GET` | `/api/all-orders` | ุฌููุน ุทูุจุงุช ุงููุณุชุฎุฏู | `api` |
| `GET` | `/api/driver/all-orders/available` | ุงูุทูุจุงุช ุงููุชุงุญุฉ ููุณุงุฆู | `driver` |
| `GET` | `/api/driver/all-orders/my` | ุทูุจุงุช ุงูุณุงุฆู | `driver` |
| `GET` | `/api/admin/all-orders` | ุฌููุน ุงูุทูุจุงุช (ุฅุฏุงุฑุฉ) | `api` |

#### ุญููู ุงูุงุณุชุฌุงุจุฉ ุงูููุญุฏุฉ
```json
{
    "orders": [
        {
            "id": 1,
            "order_type": "regular",
            "order_type_text": "ุทูุจ ุนุงุฏู",
            ...
        },
        {
            "id": 3,
            "order_type": "custom",
            "order_type_text": "ุทูุจ ุฎุงุต",
            ...
        }
    ],
    "summary": {
        "regular_orders_count": 25,
        "custom_orders_count": 17,
        "total_count": 42
    }
}
```

---

### User APIs - ุงููุณุชุฎุฏู

#### ุงูุทูุจ ุงูุนุงุฏู (Order)

| ุงูุทุฑููุฉ | ุงููุณุงุฑ | ุงููุตู |
|---------|--------|-------|
| `GET` | `/api/orders` | ูุงุฆูุฉ ุทูุจุงุชู |
| `GET` | `/api/orders/{id}` | ุชูุงุตูู ุทูุจ |
| `POST` | `/api/orders/{id}/cancel` | ุฅูุบุงุก ุงูุทูุจ (ูุนูู ููุท) |
| `POST` | `/api/orders/{id}/resend` | โก ุฅุนุงุฏุฉ ุฅุฑุณุงู ููุณุงุฆููู (ุชุฌุฏูุฏ ุงูุตูุงุญูุฉ) |
| `POST` | `/api/orders/{id}/retry-delivery` | ุฅุนุงุฏุฉ ูุญุงููุฉ ุจุนุฏ ุงูุฅูุบุงุก |
| `POST` | `/api/orders/{id}/reorder` | ๐ ุฅุนุงุฏุฉ ุทูุจ ุทูุจูุฉ ููุชููุฉ (ุชู ุงูุชูุตูู) |

#### ุงูุทูุจ ุงูุฎุงุต (CustomOrder)

| ุงูุทุฑููุฉ | ุงููุณุงุฑ | ุงููุตู |
|---------|--------|-------|
| `POST` | `/api/custom-orders/calculate-fee` | ุญุณุงุจ ุณุนุฑ ุงูุชูุตูู |
| `POST` | `/api/custom-orders` | ุฅูุดุงุก ุทูุจ (ูุนูู ูุจุงุดุฑุฉ) |
| `GET` | `/api/custom-orders` | ูุงุฆูุฉ ุทูุจุงุชู |
| `GET` | `/api/custom-orders/{id}` | ุชูุงุตูู ุทูุจ |
| `POST` | `/api/custom-orders/{id}/cancel` | ุฅูุบุงุก (ูุนูู ููุท) |
| `POST` | `/api/custom-orders/{id}/resend` | โก ุฅุนุงุฏุฉ ุฅุฑุณุงู ููุณุงุฆููู |
| `POST` | `/api/custom-orders/{id}/retry-delivery` | ุฅุนุงุฏุฉ ูุญุงููุฉ ุจุนุฏ ุงูุฅูุบุงุก |

### Driver APIs - ุงูุณุงุฆู

#### ุงูุทูุจ ุงูุนุงุฏู

| ุงูุทุฑููุฉ | ุงููุณุงุฑ | ุงููุตู |
|---------|--------|-------|
| `GET` | `/api/driver/orders/available` | ุงูุทูุจุงุช ุงููุชุงุญุฉ |
| `GET` | `/api/driver/orders/my` | ุทูุจุงุชู |
| `POST` | `/api/driver/orders/{id}/accept` | ูุจูู ูุจุฏุก ุงูุชูุตูู |
| `POST` | `/api/driver/orders/{id}/deliver` | ุชุฃููุฏ ุงูุชุณููู |
| `POST` | `/api/driver/orders/{id}/cancel` | โก ุฅูุบุงุก ุทูุจ **ูุฌุฏูู ููุท** |

#### ุงูุทูุจ ุงูุฎุงุต

| ุงูุทุฑููุฉ | ุงููุณุงุฑ | ุงููุตู |
|---------|--------|-------|
| `GET` | `/api/driver/custom-orders/available` | ุงูุทูุจุงุช ุงููุชุงุญุฉ |
| `GET` | `/api/driver/custom-orders/my` | ุทูุจุงุชู |
| `POST` | `/api/driver/custom-orders/{id}/accept` | ูุจูู ูุจุฏุก ุงูุชูุตูู |
| `POST` | `/api/driver/custom-orders/{id}/deliver` | ุชุฃููุฏ ุงูุชุณููู |
| `POST` | `/api/driver/custom-orders/{id}/cancel` | โก ุฅูุบุงุก ุทูุจ **ูุฌุฏูู ููุท** |

> โ๏ธ **ููุงุญุธุฉ ูุงูุฉ:** 
> - ุงูุณุงุฆู ูุณุชุทูุน ุฅูุบุงุก **ุงูุทูุจุงุช ุงููุฌุฏููุฉ ููุท** (is_immediate = false)
> - ุงูุทูุจุงุช **ุงูููุฑูุฉ ูุง ูููู ุฅูุบุงุคูุง** ูู ุงูุณุงุฆู
> - ุนูุฏ ุงูุฅูุบุงุก: ูุชู ุฅุฑุณุงู ุชูุงุตูู ุงูุทูุจ + ุงููุณุชุฎุฏู + ุงูุณุจุจ ููุฅุฏุงุฑุฉ

---

### Admin APIs - ุงูุฅุฏุงุฑุฉ

| ุงูุทุฑููุฉ | ุงููุณุงุฑ | ุงููุตู |
|---------|--------|-------|
| `GET` | `/api/admin/orders` | ุฌููุน ุงูุทูุจุงุช ุงูุนุงุฏูุฉ |
| `GET` | `/api/admin/custom-orders` | ุฌููุน ุงูุทูุจุงุช ุงูุฎุงุตุฉ |
| `GET` | `/api/admin/all-orders` | ุฌููุน ุงูุทูุจุงุช (ููุญุฏ) |
| `POST` | `/api/admin/orders/{id}/cancel` | ุฅูุบุงุก ุทูุจ ุนุงุฏู |
| `POST` | `/api/admin/custom-orders/{id}/cancel` | ุฅูุบุงุก ุทูุจ ุฎุงุต |

---

## ๐ Request/Response Examples

### ุฅูุดุงุก ุทูุจ ุฎุงุต

**Request:**
```http
POST /api/custom-orders
Authorization: Bearer {user_token}
Content-Type: application/json

{
    "delivery_address": "ุญูุงุฉุ ุดุงุฑุน ุงููููุฏ",
    "delivery_lat": 35.1318,
    "delivery_lng": 36.7514,
    "distance_km": 5.5,
    "is_immediate": true,
    "items": [
        {
            "description": "ุจูุชุฒุง ุนุงุฆูู",
            "pickup_address": "ูุทุนู ุจูุชุฒุง ูุช",
            "pickup_lat": 35.1298,
            "pickup_lng": 36.7489
        }
    ]
}
```

**Response:**
```json
{
    "status": "success",
    "message": "ุชู ุฅูุดุงุก ุงูุทูุจ ุจูุฌุงุญ",
    "data": {
        "id": 1,
        "status": "pending",
        "status_text": "ูุนูู",
        "delivery_fee": 27500,
        "confirmation_expires_at": "2026-01-16T10:40:00+00:00",
        "is_confirmation_expired": false,
        "can_resend_to_drivers": false,
        "is_available_for_driver": true
    }
}
```

### ุฅุนุงุฏุฉ ุฅุฑุณุงู ููุณุงุฆููู (ุจุนุฏ ุงูุชูุงุก ุงูุตูุงุญูุฉ)

**Request:**
```http
POST /api/orders/1/resend
Authorization: Bearer {user_token}
```

**Response:**
```json
{
    "status": "success",
    "message": "ุชู ุฅุนุงุฏุฉ ุฅุฑุณุงู ุงูุทูุจ ููุณุงุฆููู",
    "data": {
        "id": 1,
        "status": "pending",
        "confirmation_expires_at": "2026-01-16T10:45:00+00:00",
        "is_confirmation_expired": false,
        "can_resend_to_drivers": false,
        "is_available_for_driver": true
    }
}
```

### ๐ ุฅุนุงุฏุฉ ุทูุจ ุทูุจูุฉ ููุชููุฉ (Reorder)

> ูููู ูููุณุชุฎุฏู ุฅุนุงุฏุฉ ุทูุจ ุทูุจูุฉ ููุชููุฉ (ุชู ุงูุชูุตูู) ูุฅูุดุงุก ุทูุจ ุฌุฏูุฏ ุจุงูุฃุณุนุงุฑ ุงูุญุงููุฉ.
> - **ุงูุฃุณุนุงุฑ**: ูุชู ุงุณุชุฎุฏุงู ุงูุฃุณุนุงุฑ ุงูุญุงููุฉ ููููุชุฌุงุช (ูููุณ ุงูุฃุณุนุงุฑ ุงููุฏููุฉ)
> - **ุงูุชููุฑ**: ูุชู ุงูุชุญูู ูู ุชููุฑ ุงูููุชุฌุงุช ูุงููููุงุช
> - **ุฅุดุนุงุฑ**: ุฅุฐุง ูุงูุช ุจุนุถ ุงูููุชุฌุงุช ุบูุฑ ูุชููุฑุฉุ ูุชู ุฅูุดุงุก ุงูุทูุจ ููููุชุฌุงุช ุงููุชููุฑุฉ ููุท ูุน ุฅุดุนุงุฑ

**Request:**
```http
POST /api/orders/1/reorder
Authorization: Bearer {user_token}
Content-Type: application/json

{
    "delivery_address": "ุญูุงุฉุ ุญู ุงูุตุงุจูููุฉุ ุจูุงุก ุฑูู 15",
    "delivery_fee": 15000,
    "is_immediate_delivery": true,
    "notes": "ุงูุฑุฌุงุก ุงูุงุชุตุงู ูุจู ุงููุตูู"
}
```

> **ููุงุญุธุฉ:** ุฌููุน ุงูุญููู ุงุฎุชูุงุฑูุฉ. ุฅุฐุง ูู ูุชู ุฅุฑุณุงููุงุ ุณูุชู ุงุณุชุฎุฏุงู ููู ุงูุทูุจ ุงูุฃุตูู.

**Response - ุฌููุน ุงูููุชุฌุงุช ูุชููุฑุฉ:**
```json
{
    "success": true,
    "message": "ุชู ุฅูุดุงุก ุงูุทูุจ ุงูุฌุฏูุฏ ุจูุฌุงุญ",
    "data": {
        "new_order": {
            "id": 15,
            "orderNumber": "ORD-000015",
            "status": "pending",
            "statusText": "ูุนูู",
            "subtotal": 120000,
            "deliveryFee": 15000,
            "total": 135000,
            "deliveryAddress": "ุญูุงุฉุ ุญู ุงูุตุงุจูููุฉุ ุจูุงุก ุฑูู 15",
            "isImmediateDelivery": true,
            "confirmationExpiresAt": "2026-01-19T11:00:00+00:00",
            "canReorder": false
        },
        "reordered_from": 1
    }
}
```

**Response - ุจุนุถ ุงูููุชุฌุงุช ุบูุฑ ูุชููุฑุฉ:**
```json
{
    "success": true,
    "message": "ุชู ุฅูุดุงุก ุงูุทูุจ ุงูุฌุฏูุฏ ุจูุฌุงุญ",
    "data": {
        "new_order": {
            "id": 16,
            "orderNumber": "ORD-000016",
            "status": "pending",
            "subtotal": 80000,
            "deliveryFee": 15000,
            "total": 95000
        },
        "reordered_from": 1,
        "unavailable_items_notice": [
            "iPhone 15 Pro (ููุฏ ูู ุงููุฎุฒูู)",
            "Samsung Galaxy S24 (ุงููููุฉ ุงููุชุงุญุฉ: 1 ุจุฏูุงู ูู 3)"
        ],
        "notice_message": "ุจุนุถ ุงูููุชุฌุงุช ูู ุชูู ูุชุงุญุฉ ุฃู ุงููููุฉ ุงููุทููุจุฉ ุบูุฑ ูุชููุฑุฉ"
    }
}
```

**Response - ุฎุทุฃ: ุฌููุน ุงูููุชุฌุงุช ุบูุฑ ูุชููุฑุฉ:**
```json
{
    "success": false,
    "message": "ูุง ุชูุฌุฏ ููุชุฌุงุช ูุชุงุญุฉ ูุฅุนุงุฏุฉ ุงูุทูุจ"
}
```

**Response - ุฎุทุฃ: ุงูุทูุจ ูู ููุชูู:**
```json
{
    "success": false,
    "message": "ูุง ูููู ุฅุนุงุฏุฉ ุงูุทูุจ ุฅูุง ููุทูุจุงุช ุงูููุชููุฉ (ุชู ุงูุชุณููู)"
}
```

#### ุญููู ูุงุฌูุฉ ุงููุณุชุฎุฏู
```json
{
    "canReorder": true  // ูุธูุฑ ุฒุฑ "ุฅุนุงุฏุฉ ุงูุทูุจ" ููุท ููุทูุจุงุช ุงูููุชููุฉ
}
```

### ุฅูุบุงุก ุงูุทูุจ ูู ุงูุฅุฏุงุฑุฉ

**Request:**
```http
POST /api/admin/orders/1/cancel
Authorization: Bearer {admin_token}
Content-Type: application/json

{
    "reason": "ุฅูุบุงุก ุฅุฏุงุฑู - ุชู ุงุณุชุฑุฌุงุน ุงููุจูุบ"
}
```

**Response:**
```json
{
    "status": "success",
    "message": "ุชู ุฅูุบุงุก ุงูุทูุจ ุจูุฌุงุญ",
    "data": {
        "id": 1,
        "status": "cancelled",
        "status_text": "ููุบู",
        "cancellationReason": "ุฅูุบุงุก ุฅุฏุงุฑู - ุชู ุงุณุชุฑุฌุงุน ุงููุจูุบ",
        "driver": {
            "id": 1,
            "name": "ูุญูุฏ ุฃุญูุฏ"
        }
    }
}
```

---

## ๐ ุดุฑูุท ุฃูููุฉ ุงูุณุงุฆู ููุจูู ุงูุทูุจ

| ุงูุดุฑุท | ุงููุตู | ุฑุณุงูุฉ ุงูุฎุทุฃ |
|-------|-------|-------------|
| **ุฑุตูุฏ ุงููุญูุธุฉ** | ูุฌุจ ุฃู ูููู โฅ ูุณุจุฉ ุฑุจุญ ุงูุชูุตูู | ุฑุตูุฏ ูุญูุธุชู ุบูุฑ ูุงูู ููุจูู ูุฐุง ุงูุทูุจ |
| **ุงูุทูุจุงุช ุงูููุฑูุฉ** | ุญุฏ ุฃูุตู ุทูุจ ููุฑู ูุงุญุฏ ูุดุท | ูุฏูู ุทูุจ ููุฑู ููุฏ ุงูุชูุตูู ุจุงููุนู |
| **ุงูุทูุจุงุช ุงููุฌุฏููุฉ** | ุญุฏ ุฃูุตู 3 ุทูุจุงุช ูุฌุฏููุฉ ูุดุทุฉ | ููุฏ ูุตูุช ููุญุฏ ุงูุฃูุตู ูู ุงูุทูุจุงุช ุงููุฌุฏููุฉ (3 ุทูุจุงุช) |

```
    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ           ุดุฑูุท ูุจูู ุงูุทูุจ ููุณุงุฆู                โ
    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
    โ                                                 โ
    โ  ๐ฐ ุฑุตูุฏ ุงููุญูุธุฉ โฅ ุฑุจุญ ุงูุชูุตููุ                 โ
    โ          โ                                      โ
    โ    โ ูุง โ โ ูุนู                               โ
    โ          โผ                                      โ
    โ  ๐ฆ ุทูุจ ููุฑู ุฃู ูุฌุฏููุ                         โ
    โ      โ           โ                              โ
    โ   ููุฑู        ูุฌุฏูู                            โ
    โ      โ           โ                              โ
    โ      โผ           โผ                              โ
    โ  ุทูุจุงุช ููุฑูุฉ   ุทูุจุงุช ูุฌุฏููุฉ                    โ
    โ  ูุดุทุฉ < 1ุ     ูุดุทุฉ < 3ุ                       โ
    โ      โ           โ                              โ
    โ   โ/โ        โ/โ                             โ
    โ                                                 โ
    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ููุงุนุฏ ุงูุฅูุบุงุก

### ุงูุทูุจุงุช ุงูููุฑูุฉ (is_immediate = true)

| ูู ููุบู | ูู ุญุงูุฉ `pending` | ูู ุญุงูุฉ `shipping` |
|---------|-------------------|---------------------|
| **ุงููุณุชุฎุฏู** | โ ูุณููุญ | โ ุบูุฑ ูุณููุญ |
| **ุงูุณุงุฆู** | โ ุบูุฑ ูุณููุญ | โ ุบูุฑ ูุณููุญ |
| **ุงูุฅุฏุงุฑุฉ** | โ ูุณููุญ | โ ูุณููุญ |

### ุงูุทูุจุงุช ุงููุฌุฏููุฉ (is_immediate = false)

| ูู ููุบู | ูู ุญุงูุฉ `pending` | ูู ุญุงูุฉ `shipping` |
|---------|-------------------|---------------------|
| **ุงููุณุชุฎุฏู** | โ ูุณููุญ | โ ุบูุฑ ูุณููุญ |
| **ุงูุณุงุฆู** | โ ุบูุฑ ูุณููุญ | โ ูุณููุญ (ูุน ุณุจุจ) |
| **ุงูุฅุฏุงุฑุฉ** | โ ูุณููุญ | โ ูุณููุญ |

### ุฅูุบุงุก ุงูุณุงุฆู ููุทูุจ ุงููุฌุฏูู

ุนูุฏ ุฅูุบุงุก ุงูุณุงุฆู ูุทูุจ ูุฌุฏููุ ูุชู:
1. ุฅูุบุงุก ุงูุทูุจ ูุชุบููุฑ ุงูุญุงูุฉ ุฅูู `cancelled`
2. ุฅุฑุณุงู ุงูุจูุงูุงุช ุงูุชุงููุฉ ููุฅุฏุงุฑุฉ:
   - ุชูุงุตูู ุงูุทูุจ ูุงููุฉ
   - ุชูุงุตูู ุงููุณุชุฎุฏู (ุงูุงุณู + ุงููุงุชู)
   - ุชูุงุตูู ุงูุณุงุฆู
   - ุณุจุจ ุงูุฅูุบุงุก

**Request:**
```http
POST /api/driver/orders/1/cancel
Authorization: Bearer {driver_token}
Content-Type: application/json

{
    "reason": "ุงูุนููู ุบูุฑ ูุชูุงุฌุฏ ูู ุงูููุนุฏ ุงููุญุฏุฏ"
}
```

**Response:**
```json
{
    "success": true,
    "message": "ุชู ุฅูุบุงุก ุงูุทูุจ ุงููุฌุฏูู ุจูุฌุงุญ",
    "data": {
        "order": {
            "id": 1,
            "status": "cancelled",
            "statusText": "ููุบู"
        },
        "notification_sent_to_admin": true,
        "message_to_driver": "ุชู ุฅูุบุงุก ุงูุทูุจ ูุฅุฑุณุงู ุงูุจูุงูุงุช ููุฅุฏุงุฑุฉ"
    }
}
```

> โ๏ธ ุงูุญุงูุงุช `delivered` ู `cancelled` ูุง ูููู ุฅูุบุงุคูุง

---

## ๐ Authentication

```
Authorization: Bearer {token}
Accept: application/json
```

- **User APIs**: Guard `api`
- **Driver APIs**: Guard `driver`
- **Admin APIs**: Guard `api` (ูุณุชุฎุฏู ุจุตูุงุญูุงุช ุฅุฏุงุฑูุฉ)

---

## โ๏ธ Error Handling

| ุงูููุฏ | ุงูุฑุณุงูุฉ |
|-------|---------|
| `400` | ูุง ูููู ุฅูุบุงุก ูุฐุง ุงูุทูุจ ูู ุญุงูุชู ุงูุญุงููุฉ |
| `400` | ูุฌุจ ุฅุถุงูุฉ ุนูุตุฑ ูุงุญุฏ ุนูู ุงูุฃูู |
| `400` | ุชู ูุจูู ูุฐุง ุงูุทูุจ ูู ุณุงุฆู ุขุฎุฑ |
| `400` | ุญุณุงุจู ุบูุฑ ูุดุท ุญุงููุงู |
| `400` | ุฑุตูุฏ ูุญูุธุชู ุบูุฑ ูุงูู ููุจูู ูุฐุง ุงูุทูุจ |
| `400` | ูุฏูู ุทูุจ ููุฑู ููุฏ ุงูุชูุตูู ุจุงููุนู |
| `400` | ููุฏ ูุตูุช ููุญุฏ ุงูุฃูุตู ูู ุงูุทูุจุงุช ุงููุฌุฏููุฉ (3 ุทูุจุงุช) |
| `400` | ูุฐุง ุงูุทูุจ ุบูุฑ ููุบู |
| `404` | ุงูุทูุจ ุบูุฑ ููุฌูุฏ |

---

## ๐ฐ ุญุณุงุจ ุณุนุฑ ุงูุชูุตูู

```
delivery_fee = distance_km ร km_price
```

- `km_price` ูู ุฌุฏูู `profit_ratios` (tag: `km_price`)
- `distance_km` ูุญุณุจูุง Frontend

---

**ุขุฎุฑ ุชุญุฏูุซ:** 19 ููุงูุฑ 2026 (v2 - ุงูุทูุจุงุช ุงูููุญุฏุฉ)
