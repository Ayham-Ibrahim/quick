{
	"info": {
		"_postman_id": "purchase-flow-2026",
		"name": "Quick API - Purchase Flow (Cart → Checkout → Orders)",
		"description": "تسلسل عملية الشراء الكامل - من إضافة المنتجات للسلة حتى التوصيل",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8000/api",
			"type": "string"
		},
		{
			"key": "token",
			"value": "",
			"type": "string"
		},
		{
			"key": "driver_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "admin_token",
			"value": "",
			"type": "string"
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{token}}",
				"type": "string"
			}
		]
	},
	"item": [
		{
			"name": "1️⃣ Cart (السلة)",
			"description": "إدارة سلة التسوق",
			"item": [
				{
					"name": "1.1 Get Cart",
					"request": {
						"method": "GET",
						"header": [
							{"key": "Accept", "value": "application/json"}
						],
						"url": {
							"raw": "{{base_url}}/cart",
							"host": ["{{base_url}}"],
							"path": ["cart"]
						},
						"description": "جلب السلة الحالية للمستخدم"
					},
					"response": [
						{
							"name": "Success - Cart with items",
							"status": "OK",
							"code": 200,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"success\",\n    \"message\": \"تم جلب السلة بنجاح\",\n    \"data\": {\n        \"id\": 1,\n        \"status\": \"active\",\n        \"items_count\": 3,\n        \"total_quantity\": 5,\n        \"subtotal\": 1250.00,\n        \"items\": [\n            {\n                \"id\": 1,\n                \"product_id\": 5,\n                \"product_variant_id\": 12,\n                \"quantity\": 2,\n                \"unit_price\": 350.00,\n                \"line_total\": 700.00,\n                \"product\": {\n                    \"id\": 5,\n                    \"name\": \"هاتف سامسونج A54\",\n                    \"current_price\": 350.00,\n                    \"images\": [\n                        {\"id\": 1, \"url\": \"http://localhost:8000/storage/products/img_abc123.jpg\"}\n                    ],\n                    \"store\": {\n                        \"id\": 1,\n                        \"store_name\": \"متجر التقنية\",\n                        \"store_logo\": \"http://localhost:8000/storage/stores/logo_xyz.jpg\"\n                    }\n                },\n                \"variant\": {\n                    \"id\": 12,\n                    \"sku\": \"SAM-A54-BLK-128\",\n                    \"price\": 350.00,\n                    \"stock_quantity\": 15,\n                    \"attributes_string\": \"اللون: أسود، الذاكرة: 128GB\"\n                }\n            },\n            {\n                \"id\": 2,\n                \"product_id\": 8,\n                \"product_variant_id\": null,\n                \"quantity\": 3,\n                \"unit_price\": 150.00,\n                \"line_total\": 450.00,\n                \"product\": {\n                    \"id\": 8,\n                    \"name\": \"سماعات بلوتوث\",\n                    \"current_price\": 150.00,\n                    \"images\": [],\n                    \"store\": {\n                        \"id\": 1,\n                        \"store_name\": \"متجر التقنية\",\n                        \"store_logo\": \"http://localhost:8000/storage/stores/logo_xyz.jpg\"\n                    }\n                },\n                \"variant\": null\n            }\n        ],\n        \"created_at\": \"2026-01-08 10:30:00\"\n    }\n}"
						},
						{
							"name": "Success - Empty Cart",
							"status": "OK",
							"code": 200,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"success\",\n    \"message\": \"تم جلب السلة بنجاح\",\n    \"data\": {\n        \"id\": 2,\n        \"status\": \"active\",\n        \"items_count\": 0,\n        \"total_quantity\": 0,\n        \"subtotal\": 0,\n        \"items\": [],\n        \"created_at\": \"2026-01-08 11:00:00\"\n    }\n}"
						}
					]
				},
				{
					"name": "1.2 Get Cart Summary",
					"request": {
						"method": "GET",
						"header": [
							{"key": "Accept", "value": "application/json"}
						],
						"url": {
							"raw": "{{base_url}}/cart/summary",
							"host": ["{{base_url}}"],
							"path": ["cart", "summary"]
						},
						"description": "ملخص سريع للسلة (للعرض في الهيدر)"
					},
					"response": [
						{
							"name": "Success",
							"status": "OK",
							"code": 200,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"success\",\n    \"message\": \"ملخص السلة\",\n    \"data\": {\n        \"cart_id\": 1,\n        \"items_count\": 3,\n        \"total_quantity\": 5,\n        \"subtotal\": 1250.00\n    }\n}"
						}
					]
				},
				{
					"name": "1.3 Add Item to Cart",
					"request": {
						"method": "POST",
						"header": [
							{"key": "Accept", "value": "application/json"},
							{"key": "Content-Type", "value": "application/json"}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"product_id\": 5,\n    \"product_variant_id\": 12,\n    \"quantity\": 2\n}",
							"options": {"raw": {"language": "json"}}
						},
						"url": {
							"raw": "{{base_url}}/cart/items",
							"host": ["{{base_url}}"],
							"path": ["cart", "items"]
						},
						"description": "إضافة منتج للسلة (مع أو بدون variant)"
					},
					"response": [
						{
							"name": "Success - Item Added",
							"status": "OK",
							"code": 200,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"success\",\n    \"message\": \"تم إضافة المنتج للسلة بنجاح\",\n    \"data\": {\n        \"id\": 1,\n        \"status\": \"active\",\n        \"items_count\": 1,\n        \"total_quantity\": 2,\n        \"subtotal\": 700.00,\n        \"items\": [\n            {\n                \"id\": 1,\n                \"product_id\": 5,\n                \"product_variant_id\": 12,\n                \"quantity\": 2,\n                \"unit_price\": 350.00,\n                \"line_total\": 700.00,\n                \"product\": {\n                    \"id\": 5,\n                    \"name\": \"هاتف سامسونج A54\",\n                    \"current_price\": 350.00\n                },\n                \"variant\": {\n                    \"id\": 12,\n                    \"sku\": \"SAM-A54-BLK-128\",\n                    \"price\": 350.00,\n                    \"stock_quantity\": 15\n                }\n            }\n        ]\n    }\n}"
						},
						{
							"name": "Error - Product Not Found",
							"status": "Not Found",
							"code": 404,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"error\",\n    \"message\": \"المنتج غير موجود\"\n}"
						},
						{
							"name": "Error - Insufficient Stock",
							"status": "Bad Request",
							"code": 400,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"error\",\n    \"message\": \"الكمية المطلوبة غير متوفرة. المتوفر: 5\"\n}"
						},
						{
							"name": "Error - Product Not Accepted",
							"status": "Bad Request",
							"code": 400,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"error\",\n    \"message\": \"هذا المنتج غير متاح حالياً\"\n}"
						}
					]
				},
				{
					"name": "1.4 Update Item Quantity",
					"request": {
						"method": "PUT",
						"header": [
							{"key": "Accept", "value": "application/json"},
							{"key": "Content-Type", "value": "application/json"}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"quantity\": 3\n}",
							"options": {"raw": {"language": "json"}}
						},
						"url": {
							"raw": "{{base_url}}/cart/items/1",
							"host": ["{{base_url}}"],
							"path": ["cart", "items", "1"]
						},
						"description": "تعديل كمية منتج في السلة"
					},
					"response": [
						{
							"name": "Success",
							"status": "OK",
							"code": 200,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"success\",\n    \"message\": \"تم تحديث الكمية بنجاح\",\n    \"data\": {\n        \"id\": 1,\n        \"status\": \"active\",\n        \"items_count\": 1,\n        \"total_quantity\": 3,\n        \"subtotal\": 1050.00,\n        \"items\": [\n            {\n                \"id\": 1,\n                \"product_id\": 5,\n                \"quantity\": 3,\n                \"unit_price\": 350.00,\n                \"line_total\": 1050.00\n            }\n        ]\n    }\n}"
						},
						{
							"name": "Error - Exceeds Stock",
							"status": "Bad Request",
							"code": 400,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"error\",\n    \"message\": \"الكمية المطلوبة تتجاوز المخزون المتاح (15)\"\n}"
						}
					]
				},
				{
					"name": "1.5 Remove Item from Cart",
					"request": {
						"method": "DELETE",
						"header": [
							{"key": "Accept", "value": "application/json"}
						],
						"url": {
							"raw": "{{base_url}}/cart/items/1",
							"host": ["{{base_url}}"],
							"path": ["cart", "items", "1"]
						},
						"description": "حذف منتج من السلة"
					},
					"response": [
						{
							"name": "Success",
							"status": "OK",
							"code": 200,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"success\",\n    \"message\": \"تم حذف المنتج من السلة\",\n    \"data\": {\n        \"id\": 1,\n        \"items_count\": 0,\n        \"total_quantity\": 0,\n        \"subtotal\": 0,\n        \"items\": []\n    }\n}"
						}
					]
				},
				{
					"name": "1.6 Clear Cart",
					"request": {
						"method": "DELETE",
						"header": [
							{"key": "Accept", "value": "application/json"}
						],
						"url": {
							"raw": "{{base_url}}/cart/clear",
							"host": ["{{base_url}}"],
							"path": ["cart", "clear"]
						},
						"description": "تفريغ السلة بالكامل"
					},
					"response": [
						{
							"name": "Success",
							"status": "OK",
							"code": 200,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"success\",\n    \"message\": \"تم تفريغ السلة بنجاح\",\n    \"data\": {\n        \"id\": 1,\n        \"items_count\": 0,\n        \"total_quantity\": 0,\n        \"subtotal\": 0,\n        \"items\": []\n    }\n}"
						}
					]
				},
				{
					"name": "1.7 Validate Cart",
					"request": {
						"method": "GET",
						"header": [
							{"key": "Accept", "value": "application/json"}
						],
						"url": {
							"raw": "{{base_url}}/cart/validate",
							"host": ["{{base_url}}"],
							"path": ["cart", "validate"]
						},
						"description": "التحقق من صلاحية السلة قبل الدفع"
					},
					"response": [
						{
							"name": "Success - Valid Cart",
							"status": "OK",
							"code": 200,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"success\",\n    \"message\": \"السلة جاهزة للدفع\",\n    \"data\": {\n        \"is_valid\": true,\n        \"issues\": []\n    }\n}"
						},
						{
							"name": "Warning - Has Issues",
							"status": "OK",
							"code": 200,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"success\",\n    \"message\": \"يوجد مشاكل في السلة تحتاج إلى معالجة\",\n    \"data\": {\n        \"is_valid\": false,\n        \"issues\": [\n            {\n                \"item_id\": 1,\n                \"product_name\": \"هاتف سامسونج A54\",\n                \"type\": \"insufficient_stock\",\n                \"message\": \"الكمية المطلوبة (10) تتجاوز المتوفر (5)\",\n                \"available_quantity\": 5\n            },\n            {\n                \"item_id\": 2,\n                \"product_name\": \"سماعات قديمة\",\n                \"type\": \"product_unavailable\",\n                \"message\": \"المنتج لم يعد متاحاً\"\n            },\n            {\n                \"item_id\": 3,\n                \"product_name\": \"شاحن سريع\",\n                \"type\": \"price_changed\",\n                \"message\": \"السعر تغير من 50 إلى 65\",\n                \"old_price\": 50.00,\n                \"new_price\": 65.00\n            }\n        ]\n    }\n}"
						}
					]
				}
			]
		},
		{
			"name": "2️⃣ Checkout (الدفع)",
			"description": "عمليات الدفع والكوبونات",
			"item": [
				{
					"name": "2.1 Validate Coupon",
					"request": {
						"method": "POST",
						"header": [
							{"key": "Accept", "value": "application/json"},
							{"key": "Content-Type", "value": "application/json"}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"coupon_code\": \"SAVE10\"\n}",
							"options": {"raw": {"language": "json"}}
						},
						"url": {
							"raw": "{{base_url}}/checkout/validate-coupon",
							"host": ["{{base_url}}"],
							"path": ["checkout", "validate-coupon"]
						},
						"description": "التحقق من صلاحية كوبون"
					},
					"response": [
						{
							"name": "Success - Valid Coupon",
							"status": "OK",
							"code": 200,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"success\",\n    \"message\": \"الكوبون صالح للاستخدام\",\n    \"data\": {\n        \"is_valid\": true,\n        \"coupon\": {\n            \"code\": \"SAVE10\",\n            \"type\": \"percentage\",\n            \"amount\": 10\n        },\n        \"discount_amount\": 125.00,\n        \"applicable_items_count\": 2,\n        \"message\": \"الكوبون صالح للاستخدام\"\n    }\n}"
						},
						{
							"name": "Error - Invalid Coupon",
							"status": "Bad Request",
							"code": 400,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"error\",\n    \"message\": \"الكوبون غير صالح أو منتهي الصلاحية\"\n}"
						},
						{
							"name": "Error - Coupon Already Used",
							"status": "Bad Request",
							"code": 400,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"error\",\n    \"message\": \"لقد استخدمت هذا الكوبون من قبل\"\n}"
						},
						{
							"name": "Error - No Applicable Products",
							"status": "Bad Request",
							"code": 400,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"error\",\n    \"message\": \"الكوبون لا ينطبق على أي منتج في سلتك\"\n}"
						}
					]
				},
				{
					"name": "2.2 Preview Order",
					"request": {
						"method": "GET",
						"header": [
							{"key": "Accept", "value": "application/json"}
						],
						"url": {
							"raw": "{{base_url}}/checkout/preview?coupon_code=SAVE10",
							"host": ["{{base_url}}"],
							"path": ["checkout", "preview"],
							"query": [
								{"key": "coupon_code", "value": "SAVE10", "description": "اختياري - كود الكوبون"}
							]
						},
						"description": "معاينة الطلب قبل الدفع"
					},
					"response": [
						{
							"name": "Success - With Coupon",
							"status": "OK",
							"code": 200,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"success\",\n    \"message\": \"معاينة الطلب\",\n    \"data\": {\n        \"cart_id\": 1,\n        \"items_count\": 3,\n        \"total_quantity\": 5,\n        \"subtotal\": 1250.00,\n        \"discount\": {\n            \"amount\": 125.00,\n            \"coupon_code\": \"SAVE10\",\n            \"coupon_type\": \"percentage\",\n            \"coupon_value\": 10,\n            \"applicable_items_count\": 2\n        },\n        \"total\": 1125.00,\n        \"items_with_discount\": [\n            {\n                \"item_id\": 1,\n                \"product_name\": \"هاتف سامسونج A54\",\n                \"original_price\": 700.00,\n                \"discount\": 70.00,\n                \"final_price\": 630.00\n            },\n            {\n                \"item_id\": 2,\n                \"product_name\": \"سماعات بلوتوث\",\n                \"original_price\": 450.00,\n                \"discount\": 45.00,\n                \"final_price\": 405.00\n            }\n        ]\n    }\n}"
						},
						{
							"name": "Success - Without Coupon",
							"status": "OK",
							"code": 200,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"success\",\n    \"message\": \"معاينة الطلب\",\n    \"data\": {\n        \"cart_id\": 1,\n        \"items_count\": 3,\n        \"total_quantity\": 5,\n        \"subtotal\": 1250.00,\n        \"discount\": {\n            \"amount\": 0,\n            \"coupon_code\": null,\n            \"coupon_type\": null,\n            \"coupon_value\": null,\n            \"applicable_items_count\": 0\n        },\n        \"total\": 1250.00,\n        \"items_with_discount\": []\n    }\n}"
						},
						{
							"name": "Error - Empty Cart",
							"status": "Bad Request",
							"code": 400,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"error\",\n    \"message\": \"السلة فارغة\"\n}"
						}
					]
				},
				{
					"name": "2.3 Complete Checkout",
					"request": {
						"method": "POST",
						"header": [
							{"key": "Accept", "value": "application/json"},
							{"key": "Content-Type", "value": "application/json"}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"coupon_code\": \"SAVE10\",\n    \"delivery_address\": \"شارع الملك فهد، حي العليا، الرياض، المملكة العربية السعودية\",\n    \"requested_delivery_at\": \"2026-01-10 14:00:00\",\n    \"notes\": \"الرجاء الاتصال قبل الوصول بـ 10 دقائق\"\n}",
							"options": {"raw": {"language": "json"}}
						},
						"url": {
							"raw": "{{base_url}}/checkout",
							"host": ["{{base_url}}"],
							"path": ["checkout"]
						},
						"description": "إتمام عملية الشراء وإنشاء الطلب"
					},
					"response": [
						{
							"name": "Success - Order Created",
							"status": "Created",
							"code": 201,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"success\",\n    \"message\": \"تم إنشاء الطلب بنجاح\",\n    \"data\": {\n        \"id\": 1,\n        \"orderNumber\": \"ORD-000001\",\n        \"status\": \"pending\",\n        \"statusText\": \"بانتظار التأكيد\",\n        \"subtotal\": 1250.00,\n        \"discountAmount\": 125.00,\n        \"deliveryFee\": 0,\n        \"total\": 1125.00,\n        \"coupon\": {\n            \"code\": \"SAVE10\",\n            \"discountAmount\": 125.00\n        },\n        \"deliveryAddress\": \"شارع الملك فهد، حي العليا، الرياض، المملكة العربية السعودية\",\n        \"requestedDeliveryAt\": \"2026-01-10 14:00\",\n        \"notes\": \"الرجاء الاتصال قبل الوصول بـ 10 دقائق\",\n        \"itemsCount\": 5,\n        \"isCancellable\": true,\n        \"hasDriver\": false,\n        \"driverAssignedAt\": null,\n        \"items\": [\n            {\n                \"id\": 1,\n                \"product_id\": 5,\n                \"product_name\": \"هاتف سامسونج A54\",\n                \"quantity\": 2,\n                \"unit_price\": 350.00,\n                \"discount_amount\": 70.00,\n                \"line_total\": 630.00,\n                \"store\": {\n                    \"id\": 1,\n                    \"name\": \"متجر التقنية\"\n                }\n            },\n            {\n                \"id\": 2,\n                \"product_id\": 8,\n                \"product_name\": \"سماعات بلوتوث\",\n                \"quantity\": 3,\n                \"unit_price\": 150.00,\n                \"discount_amount\": 45.00,\n                \"line_total\": 405.00,\n                \"store\": {\n                    \"id\": 1,\n                    \"name\": \"متجر التقنية\"\n                }\n            }\n        ],\n        \"createdAt\": \"2026-01-08 12:30\",\n        \"updatedAt\": \"2026-01-08 12:30\"\n    }\n}"
						},
						{
							"name": "Error - Empty Cart",
							"status": "Bad Request",
							"code": 400,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"error\",\n    \"message\": \"السلة فارغة\"\n}"
						},
						{
							"name": "Error - Validation Failed",
							"status": "Unprocessable Entity",
							"code": 422,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"error\",\n    \"message\": \"Validation failed\",\n    \"errors\": {\n        \"delivery_address\": [\"يجب إدخال عنوان التوصيل\"],\n        \"requested_delivery_at\": [\"موعد التوصيل يجب أن يكون في المستقبل\"]\n    }\n}"
						}
					]
				}
			]
		},
		{
			"name": "3️⃣ Orders - User (طلبات المستخدم)",
			"description": "إدارة طلبات العميل",
			"item": [
				{
					"name": "3.1 Get My Orders",
					"request": {
						"method": "GET",
						"header": [
							{"key": "Accept", "value": "application/json"}
						],
						"url": {
							"raw": "{{base_url}}/orders?status=pending&per_page=10",
							"host": ["{{base_url}}"],
							"path": ["orders"],
							"query": [
								{"key": "status", "value": "pending", "description": "اختياري - فلترة حسب الحالة"},
								{"key": "per_page", "value": "10", "description": "اختياري - عدد النتائج"}
							]
						},
						"description": "جلب طلباتي"
					},
					"response": [
						{
							"name": "Success",
							"status": "OK",
							"code": 200,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"success\",\n    \"message\": \"تم جلب الطلبات بنجاح\",\n    \"data\": [\n        {\n            \"id\": 1,\n            \"orderNumber\": \"ORD-000001\",\n            \"status\": \"pending\",\n            \"statusText\": \"بانتظار التأكيد\",\n            \"total\": 1125.00,\n            \"itemsCount\": 5,\n            \"isCancellable\": true,\n            \"hasDriver\": false,\n            \"createdAt\": \"2026-01-08 12:30\"\n        },\n        {\n            \"id\": 2,\n            \"orderNumber\": \"ORD-000002\",\n            \"status\": \"shipped\",\n            \"statusText\": \"في الطريق\",\n            \"total\": 500.00,\n            \"itemsCount\": 2,\n            \"isCancellable\": false,\n            \"hasDriver\": true,\n            \"driver\": {\n                \"id\": 3,\n                \"name\": \"أحمد السائق\",\n                \"phone\": \"967771112222\"\n            },\n            \"createdAt\": \"2026-01-07 10:00\"\n        }\n    ],\n    \"meta\": {\n        \"current_page\": 1,\n        \"per_page\": 10,\n        \"total\": 2,\n        \"last_page\": 1\n    }\n}"
						}
					]
				},
				{
					"name": "3.2 Get Order Details",
					"request": {
						"method": "GET",
						"header": [
							{"key": "Accept", "value": "application/json"}
						],
						"url": {
							"raw": "{{base_url}}/orders/1",
							"host": ["{{base_url}}"],
							"path": ["orders", "1"]
						},
						"description": "تفاصيل طلب معين"
					},
					"response": [
						{
							"name": "Success",
							"status": "OK",
							"code": 200,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"success\",\n    \"message\": \"تم جلب تفاصيل الطلب بنجاح\",\n    \"data\": {\n        \"id\": 1,\n        \"orderNumber\": \"ORD-000001\",\n        \"status\": \"pending\",\n        \"statusText\": \"بانتظار التأكيد\",\n        \"subtotal\": 1250.00,\n        \"discountAmount\": 125.00,\n        \"deliveryFee\": 0,\n        \"total\": 1125.00,\n        \"coupon\": {\n            \"code\": \"SAVE10\",\n            \"discountAmount\": 125.00\n        },\n        \"deliveryAddress\": \"شارع الملك فهد، حي العليا، الرياض\",\n        \"requestedDeliveryAt\": \"2026-01-10 14:00\",\n        \"notes\": \"الرجاء الاتصال قبل الوصول\",\n        \"itemsCount\": 5,\n        \"isCancellable\": true,\n        \"hasDriver\": false,\n        \"driver\": null,\n        \"driverAssignedAt\": null,\n        \"items\": [\n            {\n                \"id\": 1,\n                \"product\": {\n                    \"id\": 5,\n                    \"name\": \"هاتف سامسونج A54\",\n                    \"images\": [{\"url\": \"http://localhost:8000/storage/products/img_abc.jpg\"}]\n                },\n                \"variant\": {\n                    \"sku\": \"SAM-A54-BLK-128\",\n                    \"attributes_string\": \"اللون: أسود، الذاكرة: 128GB\"\n                },\n                \"quantity\": 2,\n                \"unit_price\": 350.00,\n                \"discount_amount\": 70.00,\n                \"line_total\": 630.00,\n                \"store\": {\n                    \"id\": 1,\n                    \"name\": \"متجر التقنية\",\n                    \"logo\": \"http://localhost:8000/storage/stores/logo.jpg\"\n                }\n            }\n        ],\n        \"itemsByStore\": [\n            {\n                \"store\": {\n                    \"id\": 1,\n                    \"storeName\": \"متجر التقنية\",\n                    \"storeLogo\": \"http://localhost:8000/storage/stores/logo.jpg\"\n                },\n                \"itemsCount\": 2,\n                \"subtotal\": 1035.00,\n                \"items\": [...]\n            }\n        ],\n        \"createdAt\": \"2026-01-08 12:30\",\n        \"updatedAt\": \"2026-01-08 12:30\"\n    }\n}"
						},
						{
							"name": "Error - Not Found",
							"status": "Not Found",
							"code": 404,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"error\",\n    \"message\": \"الطلب غير موجود\"\n}"
						}
					]
				},
				{
					"name": "3.3 Cancel Order",
					"request": {
						"method": "POST",
						"header": [
							{"key": "Accept", "value": "application/json"},
							{"key": "Content-Type", "value": "application/json"}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"reason\": \"تغيرت خطتي ولم أعد بحاجة للمنتجات\"\n}",
							"options": {"raw": {"language": "json"}}
						},
						"url": {
							"raw": "{{base_url}}/orders/1/cancel",
							"host": ["{{base_url}}"],
							"path": ["orders", "1", "cancel"]
						},
						"description": "إلغاء طلب (فقط إذا كان pending أو confirmed)"
					},
					"response": [
						{
							"name": "Success",
							"status": "OK",
							"code": 200,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"success\",\n    \"message\": \"تم إلغاء الطلب بنجاح\",\n    \"data\": {\n        \"id\": 1,\n        \"orderNumber\": \"ORD-000001\",\n        \"status\": \"cancelled\",\n        \"statusText\": \"ملغي\",\n        \"cancellationReason\": \"تغيرت خطتي ولم أعد بحاجة للمنتجات\",\n        \"isCancellable\": false\n    }\n}"
						},
						{
							"name": "Error - Cannot Cancel",
							"status": "Bad Request",
							"code": 400,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"error\",\n    \"message\": \"لا يمكن إلغاء هذا الطلب في حالته الحالية\"\n}"
						}
					]
				}
			]
		},
		{
			"name": "4️⃣ Orders - Driver (طلبات السائق)",
			"description": "إدارة طلبات التوصيل للسائق",
			"auth": {
				"type": "bearer",
				"bearer": [{"key": "token", "value": "{{driver_token}}", "type": "string"}]
			},
			"item": [
				{
					"name": "4.1 Get Available Orders",
					"request": {
						"method": "GET",
						"header": [
							{"key": "Accept", "value": "application/json"}
						],
						"url": {
							"raw": "{{base_url}}/driver/orders/available",
							"host": ["{{base_url}}"],
							"path": ["driver", "orders", "available"]
						},
						"description": "الطلبات المتاحة للتوصيل (بدون سائق)"
					},
					"response": [
						{
							"name": "Success",
							"status": "OK",
							"code": 200,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"success\",\n    \"message\": \"الطلبات المتاحة للتوصيل\",\n    \"data\": [\n        {\n            \"id\": 5,\n            \"orderNumber\": \"ORD-000005\",\n            \"status\": \"ready\",\n            \"statusText\": \"جاهز للتوصيل\",\n            \"total\": 850.00,\n            \"itemsCount\": 3,\n            \"deliveryAddress\": \"شارع الملك عبدالله، جدة\",\n            \"requestedDeliveryAt\": \"2026-01-08 18:00\",\n            \"user\": {\n                \"id\": 10,\n                \"name\": \"محمد أحمد\",\n                \"phone\": \"967771234567\"\n            },\n            \"createdAt\": \"2026-01-08 14:00\"\n        },\n        {\n            \"id\": 6,\n            \"orderNumber\": \"ORD-000006\",\n            \"status\": \"ready\",\n            \"statusText\": \"جاهز للتوصيل\",\n            \"total\": 320.00,\n            \"itemsCount\": 1,\n            \"deliveryAddress\": \"حي النزهة، الرياض\",\n            \"requestedDeliveryAt\": null,\n            \"user\": {\n                \"id\": 15,\n                \"name\": \"سارة علي\",\n                \"phone\": \"967779876543\"\n            },\n            \"createdAt\": \"2026-01-08 15:30\"\n        }\n    ],\n    \"meta\": {\n        \"current_page\": 1,\n        \"per_page\": 15,\n        \"total\": 2,\n        \"last_page\": 1\n    }\n}"
						}
					]
				},
				{
					"name": "4.2 Get My Deliveries",
					"request": {
						"method": "GET",
						"header": [
							{"key": "Accept", "value": "application/json"}
						],
						"url": {
							"raw": "{{base_url}}/driver/orders/my?status=shipped",
							"host": ["{{base_url}}"],
							"path": ["driver", "orders", "my"],
							"query": [
								{"key": "status", "value": "shipped", "description": "اختياري"}
							]
						},
						"description": "طلباتي المسندة إلي"
					},
					"response": [
						{
							"name": "Success",
							"status": "OK",
							"code": 200,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"success\",\n    \"message\": \"طلباتك\",\n    \"data\": [\n        {\n            \"id\": 3,\n            \"orderNumber\": \"ORD-000003\",\n            \"status\": \"shipped\",\n            \"statusText\": \"في الطريق\",\n            \"total\": 650.00,\n            \"deliveryAddress\": \"شارع التحلية، الرياض\",\n            \"user\": {\n                \"id\": 8,\n                \"name\": \"خالد محمد\",\n                \"phone\": \"967775551234\"\n            },\n            \"driverAssignedAt\": \"2026-01-08 13:00\",\n            \"createdAt\": \"2026-01-08 10:00\"\n        }\n    ],\n    \"meta\": {\n        \"current_page\": 1,\n        \"per_page\": 15,\n        \"total\": 1,\n        \"last_page\": 1\n    }\n}"
						}
					]
				},
				{
					"name": "4.3 Accept Order",
					"request": {
						"method": "POST",
						"header": [
							{"key": "Accept", "value": "application/json"}
						],
						"url": {
							"raw": "{{base_url}}/driver/orders/5/accept",
							"host": ["{{base_url}}"],
							"path": ["driver", "orders", "5", "accept"]
						},
						"description": "قبول طلب للتوصيل"
					},
					"response": [
						{
							"name": "Success",
							"status": "OK",
							"code": 200,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"success\",\n    \"message\": \"تم قبول الطلب بنجاح\",\n    \"data\": {\n        \"id\": 5,\n        \"orderNumber\": \"ORD-000005\",\n        \"status\": \"shipped\",\n        \"statusText\": \"في الطريق\",\n        \"total\": 850.00,\n        \"deliveryAddress\": \"شارع الملك عبدالله، جدة\",\n        \"user\": {\n            \"id\": 10,\n            \"name\": \"محمد أحمد\",\n            \"phone\": \"967771234567\"\n        },\n        \"hasDriver\": true,\n        \"driverAssignedAt\": \"2026-01-08 16:30\"\n    }\n}"
						},
						{
							"name": "Error - Already Taken",
							"status": "Bad Request",
							"code": 400,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"error\",\n    \"message\": \"تم قبول هذا الطلب من سائق آخر\"\n}"
						},
						{
							"name": "Error - Driver Inactive",
							"status": "Bad Request",
							"code": 400,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"error\",\n    \"message\": \"حسابك غير نشط حالياً\"\n}"
						}
					]
				},
				{
					"name": "4.4 Deliver Order",
					"request": {
						"method": "POST",
						"header": [
							{"key": "Accept", "value": "application/json"}
						],
						"url": {
							"raw": "{{base_url}}/driver/orders/5/deliver",
							"host": ["{{base_url}}"],
							"path": ["driver", "orders", "5", "deliver"]
						},
						"description": "تأكيد تسليم الطلب"
					},
					"response": [
						{
							"name": "Success",
							"status": "OK",
							"code": 200,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"success\",\n    \"message\": \"تم تسليم الطلب بنجاح\",\n    \"data\": {\n        \"id\": 5,\n        \"orderNumber\": \"ORD-000005\",\n        \"status\": \"delivered\",\n        \"statusText\": \"تم التوصيل\",\n        \"total\": 850.00,\n        \"hasDriver\": true,\n        \"driverAssignedAt\": \"2026-01-08 16:30\",\n        \"updatedAt\": \"2026-01-08 17:45\"\n    }\n}"
						},
						{
							"name": "Error - Not Your Order",
							"status": "Not Found",
							"code": 404,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"error\",\n    \"message\": \"الطلب غير موجود أو غير مسند إليك\"\n}"
						}
					]
				}
			]
		},
		{
			"name": "5️⃣ Orders - Admin (إدارة الطلبات)",
			"description": "إدارة الطلبات للأدمن/المتجر",
			"auth": {
				"type": "bearer",
				"bearer": [{"key": "token", "value": "{{admin_token}}", "type": "string"}]
			},
			"item": [
				{
					"name": "5.1 Get All Orders",
					"request": {
						"method": "GET",
						"header": [
							{"key": "Accept", "value": "application/json"}
						],
						"url": {
							"raw": "{{base_url}}/admin/orders?status=pending&per_page=20",
							"host": ["{{base_url}}"],
							"path": ["admin", "orders"],
							"query": [
								{"key": "status", "value": "pending", "description": "اختياري"},
								{"key": "user_id", "value": "", "description": "اختياري - فلترة حسب المستخدم", "disabled": true},
								{"key": "driver_id", "value": "", "description": "اختياري - فلترة حسب السائق", "disabled": true},
								{"key": "per_page", "value": "20", "description": "اختياري"}
							]
						},
						"description": "جلب كل الطلبات"
					},
					"response": [
						{
							"name": "Success",
							"status": "OK",
							"code": 200,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"success\",\n    \"message\": \"تم جلب الطلبات بنجاح\",\n    \"data\": [\n        {\n            \"id\": 1,\n            \"orderNumber\": \"ORD-000001\",\n            \"status\": \"pending\",\n            \"statusText\": \"بانتظار التأكيد\",\n            \"total\": 1125.00,\n            \"itemsCount\": 5,\n            \"user\": {\n                \"id\": 1,\n                \"name\": \"محمد أحمد\",\n                \"phone\": \"967771234567\"\n            },\n            \"driver\": null,\n            \"hasDriver\": false,\n            \"createdAt\": \"2026-01-08 12:30\"\n        }\n    ],\n    \"meta\": {\n        \"current_page\": 1,\n        \"per_page\": 20,\n        \"total\": 1,\n        \"last_page\": 1\n    }\n}"
						}
					]
				},
				{
					"name": "5.2 Update Order Status",
					"request": {
						"method": "PUT",
						"header": [
							{"key": "Accept", "value": "application/json"},
							{"key": "Content-Type", "value": "application/json"}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"status\": \"ready\"\n}",
							"options": {"raw": {"language": "json"}}
						},
						"url": {
							"raw": "{{base_url}}/admin/orders/1/status",
							"host": ["{{base_url}}"],
							"path": ["admin", "orders", "1", "status"]
						},
						"description": "تحديث حالة الطلب\n\nالحالات المتاحة:\n- pending\n- confirmed\n- processing\n- ready\n- shipped\n- delivered\n- cancelled"
					},
					"response": [
						{
							"name": "Success",
							"status": "OK",
							"code": 200,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"success\",\n    \"message\": \"تم تحديث حالة الطلب بنجاح\",\n    \"data\": {\n        \"id\": 1,\n        \"orderNumber\": \"ORD-000001\",\n        \"status\": \"ready\",\n        \"statusText\": \"جاهز للتوصيل\",\n        \"hasDriver\": false,\n        \"updatedAt\": \"2026-01-08 14:00\"\n    }\n}"
						},
						{
							"name": "Error - Invalid Status",
							"status": "Bad Request",
							"code": 400,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"error\",\n    \"message\": \"حالة غير صالحة\"\n}"
						}
					]
				},
				{
					"name": "5.3 Assign Driver",
					"request": {
						"method": "POST",
						"header": [
							{"key": "Accept", "value": "application/json"},
							{"key": "Content-Type", "value": "application/json"}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"driver_id\": 3\n}",
							"options": {"raw": {"language": "json"}}
						},
						"url": {
							"raw": "{{base_url}}/admin/orders/1/assign-driver",
							"host": ["{{base_url}}"],
							"path": ["admin", "orders", "1", "assign-driver"]
						},
						"description": "تعيين سائق للطلب"
					},
					"response": [
						{
							"name": "Success",
							"status": "OK",
							"code": 200,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"success\",\n    \"message\": \"تم تعيين السائق بنجاح\",\n    \"data\": {\n        \"id\": 1,\n        \"orderNumber\": \"ORD-000001\",\n        \"status\": \"shipped\",\n        \"statusText\": \"في الطريق\",\n        \"hasDriver\": true,\n        \"driver\": {\n            \"id\": 3,\n            \"name\": \"أحمد السائق\",\n            \"phone\": \"967771112222\",\n            \"vehicleType\": \"دراجة نارية\"\n        },\n        \"driverAssignedAt\": \"2026-01-08 14:30\",\n        \"updatedAt\": \"2026-01-08 14:30\"\n    }\n}"
						},
						{
							"name": "Error - Already Has Driver",
							"status": "Bad Request",
							"code": 400,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"error\",\n    \"message\": \"تم تعيين سائق لهذا الطلب مسبقاً\"\n}"
						},
						{
							"name": "Error - Order Not Ready",
							"status": "Bad Request",
							"code": 400,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"error\",\n    \"message\": \"الطلب غير جاهز للتوصيل\"\n}"
						},
						{
							"name": "Error - Driver Inactive",
							"status": "Not Found",
							"code": 404,
							"header": [{"key": "Content-Type", "value": "application/json"}],
							"body": "{\n    \"status\": \"error\",\n    \"message\": \"السائق غير موجود أو غير نشط\"\n}"
						}
					]
				}
			]
		}
	]
}
